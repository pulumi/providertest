name: yaml_command_invoke
runtime: yaml
variables:
  # Create a variable which always changes on every run
  randomShellString:
    fn::invoke:
      function: command:local:run
      arguments:
        command: cat /dev/urandom | LC_ALL=C tr -dc 'a-zA-Z0-9' | head -c 10
resources:
  randomEchoResource:
    type: command:local:Command
    properties:
      create: echo "Hello world!"
      # Force this resource to be updated if the invoke changes which is easy to assert on in the preview result.
      triggers:
        - ${randomShellString}
